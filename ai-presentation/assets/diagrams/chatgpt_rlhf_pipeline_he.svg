<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1100 500" direction="rtl">
  <defs>
    <linearGradient id="inputGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4A90D9"/>
      <stop offset="100%" style="stop-color:#2E6AB3"/>
    </linearGradient>
    <linearGradient id="hiddenGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F7C948"/>
      <stop offset="100%" style="stop-color:#E5A823"/>
    </linearGradient>
    <linearGradient id="outputGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#2ECC71"/>
      <stop offset="100%" style="stop-color:#27AE60"/>
    </linearGradient>
    <linearGradient id="rlhfGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#E74C3C"/>
      <stop offset="100%" style="stop-color:#C0392B"/>
    </linearGradient>
    <marker id="arrowGray" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="var(--color-text-muted, #888)"/>
    </marker>
    <filter id="shadow" x="-5%" y="-5%" width="115%" height="115%">
      <feDropShadow dx="0" dy="2" stdDeviation="4" flood-opacity="0.1"/>
    </filter>
  </defs>

  <!-- Arrows between stages (drawn first) -->
  <g id="connections">
    <!-- Arrow: Stage 1 → Stage 2 -->
    <path d="M 835 260 L 645 260" stroke="var(--color-text-muted, #888)" stroke-width="2.5" fill="none" marker-end="url(#arrowGray)"/>
    <!-- Arrow: Stage 2 → Stage 3 -->
    <path d="M 585 260 L 395 260" stroke="var(--color-text-muted, #888)" stroke-width="2.5" fill="none" marker-end="url(#arrowGray)"/>
    <!-- Arrow: Stage 3 → Stage 4 -->
    <path d="M 335 260 L 145 260" stroke="var(--color-text-muted, #888)" stroke-width="2.5" fill="none" marker-end="url(#arrowGray)"/>
  </g>

  <!-- Stage labels (1,2,3,4) -->
  <g id="stage-numbers">
    <text x="925" y="120" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="var(--color-text-muted, #888)">Step 1</text>
    <text x="675" y="120" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="var(--color-text-muted, #888)">Step 2</text>
    <text x="425" y="120" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="var(--color-text-muted, #888)">Step 3</text>
    <text x="175" y="120" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="var(--color-text-muted, #888)">Step 4</text>
  </g>

  <!-- Stage 1: GPT Base Model (rightmost for RTL) -->
  <g id="stage-1" filter="url(#shadow)">
    <rect x="840" y="140" width="170" height="240" rx="14" fill="var(--color-surface, #ffffff)" stroke="#2E6AB3" stroke-width="2.5"/>
    <!-- Icon area -->
    <circle cx="925" cy="195" r="32" fill="url(#inputGrad)" opacity="0.15"/>
    <text x="925" y="203" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="30" fill="#2E6AB3">🌐</text>
    <!-- Title -->
    <text x="925" y="252" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#2E6AB3">Pre-Training</text>
    <!-- Hebrew description -->
    <text x="925" y="280" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text-muted, #666)">אימון על טקסטים</text>
    <text x="925" y="300" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text-muted, #666)">מהאינטרנט</text>
    <!-- Bottom label -->
    <rect x="865" y="325" width="120" height="30" rx="15" fill="#E8F4FD"/>
    <text x="925" y="345" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#2E6AB3">GPT Base</text>
  </g>

  <!-- Stage 2: SFT -->
  <g id="stage-2" filter="url(#shadow)">
    <rect x="590" y="140" width="170" height="240" rx="14" fill="var(--color-surface, #ffffff)" stroke="#E5A823" stroke-width="2.5"/>
    <!-- Icon area -->
    <circle cx="675" cy="195" r="32" fill="url(#hiddenGrad)" opacity="0.15"/>
    <text x="675" y="203" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="30" fill="#E5A823">👨‍🏫</text>
    <!-- Title -->
    <text x="675" y="252" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#E5A823">SFT</text>
    <!-- Hebrew description -->
    <text x="675" y="280" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text-muted, #666)">כוונון מודרך</text>
    <text x="675" y="300" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text-muted, #666)">עם דוגמאות אנושיות</text>
    <!-- Bottom label -->
    <rect x="605" y="325" width="140" height="30" rx="15" fill="#FEF9E7"/>
    <text x="675" y="345" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#E5A823">Supervised FT</text>
  </g>

  <!-- Stage 3: Reward Model -->
  <g id="stage-3" filter="url(#shadow)">
    <rect x="340" y="140" width="170" height="240" rx="14" fill="var(--color-surface, #ffffff)" stroke="#27AE60" stroke-width="2.5"/>
    <!-- Icon area -->
    <circle cx="425" cy="195" r="32" fill="url(#outputGrad)" opacity="0.15"/>
    <text x="425" y="203" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="30" fill="#27AE60">⭐</text>
    <!-- Title -->
    <text x="425" y="252" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#27AE60">Reward Model</text>
    <!-- Hebrew description -->
    <text x="425" y="280" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text-muted, #666)">מודל ציון</text>
    <text x="425" y="300" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text-muted, #666)">מדירוגים אנושיים</text>
    <!-- Bottom label -->
    <rect x="360" y="325" width="130" height="30" rx="15" fill="#D5F5E3"/>
    <text x="425" y="345" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#27AE60">Human Rankings</text>
  </g>

  <!-- Stage 4: RLHF (leftmost for RTL) -->
  <g id="stage-4" filter="url(#shadow)">
    <rect x="90" y="140" width="170" height="240" rx="14" fill="var(--color-surface, #ffffff)" stroke="#C0392B" stroke-width="2.5"/>
    <!-- Icon area -->
    <circle cx="175" cy="195" r="32" fill="url(#rlhfGrad)" opacity="0.15"/>
    <text x="175" y="203" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="30" fill="#C0392B">🔄</text>
    <!-- Title -->
    <text x="175" y="252" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#C0392B">RLHF</text>
    <!-- Hebrew description -->
    <text x="175" y="280" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text-muted, #666)">למידה מחיזוקים</text>
    <text x="175" y="300" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text-muted, #666)">עם משוב אנושי</text>
    <!-- Bottom label -->
    <rect x="115" y="325" width="120" height="30" rx="15" fill="#FDEDEC"/>
    <text x="175" y="345" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#C0392B">ChatGPT</text>
  </g>

  <!-- Bottom annotation -->
  <text x="550" y="435" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="14" fill="var(--color-text-muted, #888)">כל שלב בונה על הקודם — המודל הופך ממחולל טקסט למודל שיחה</text>

  <!-- Progress arrow at bottom -->
  <line x1="880" y1="460" x2="220" y2="460" stroke="var(--color-text-muted, #ccc)" stroke-width="1.5" stroke-dasharray="6,3"/>
  <text x="940" y="464" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="11" fill="var(--color-text-muted, #aaa)">התחלה</text>
  <text x="160" y="464" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="11" fill="var(--color-text-muted, #aaa)">סיום</text>
</svg>
