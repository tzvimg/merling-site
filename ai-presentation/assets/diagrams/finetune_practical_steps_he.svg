<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1100 520" direction="rtl">
  <defs>
    <linearGradient id="step1Grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4A90D9"/>
      <stop offset="100%" style="stop-color:#2E6AB3"/>
    </linearGradient>
    <linearGradient id="step2Grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F7C948"/>
      <stop offset="100%" style="stop-color:#E5A823"/>
    </linearGradient>
    <linearGradient id="step3Grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#2ECC71"/>
      <stop offset="100%" style="stop-color:#27AE60"/>
    </linearGradient>
    <linearGradient id="step4Grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#9B59B6"/>
      <stop offset="100%" style="stop-color:#8E44AD"/>
    </linearGradient>
    <marker id="arrowFlow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="var(--color-text-muted, #aaa)"/>
    </marker>
    <filter id="cardShadow" x="-3%" y="-3%" width="108%" height="108%">
      <feDropShadow dx="0" dy="2" stdDeviation="4" flood-opacity="0.1"/>
    </filter>
  </defs>

  <!-- Flow arrows (right to left) -->
  <g id="arrows">
    <path d="M 830 220 L 640 220" stroke="var(--color-text-muted, #aaa)" stroke-width="2" fill="none" marker-end="url(#arrowFlow)" stroke-dasharray="6,3"/>
    <path d="M 580 220 L 390 220" stroke="var(--color-text-muted, #aaa)" stroke-width="2" fill="none" marker-end="url(#arrowFlow)" stroke-dasharray="6,3"/>
    <path d="M 330 220 L 140 220" stroke="var(--color-text-muted, #aaa)" stroke-width="2" fill="none" marker-end="url(#arrowFlow)" stroke-dasharray="6,3"/>
  </g>

  <!-- Step 1: Data Preparation (rightmost) -->
  <g id="step1" filter="url(#cardShadow)">
    <rect x="835" y="80" width="230" height="280" rx="14" fill="var(--color-surface, #ffffff)" stroke="#2E6AB3" stroke-width="2"/>
    <!-- Number badge -->
    <circle cx="865" cy="110" r="18" fill="url(#step1Grad)"/>
    <text x="865" y="116" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#ffffff">1</text>
    <!-- Title -->
    <text x="950" y="116" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#2E6AB3">הכנת דאטה</text>
    <!-- Divider -->
    <line x1="855" y1="135" x2="1045" y2="135" stroke="var(--color-border, #eee)" stroke-width="1"/>
    <!-- Items -->
    <text x="1040" y="165" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text, #444)">• איסוף דוגמאות</text>
    <text x="1040" y="190" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text, #444)">• ניקוי ועיבוד</text>
    <text x="1040" y="215" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text, #444)">• פורמט JSONL</text>
    <text x="1040" y="240" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text, #444)">• חלוקה train/val</text>
    <!-- Effort indicator -->
    <rect x="865" y="270" width="170" height="28" rx="14" fill="#E8F4FD"/>
    <text x="950" y="289" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#2E6AB3">⏱ ~80% מהעבודה</text>
    <!-- Min examples -->
    <text x="950" y="335" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="11" fill="var(--color-text-muted, #888)">מינימום: ~50 דוגמאות</text>
  </g>

  <!-- Step 2: Choose Model + Method -->
  <g id="step2" filter="url(#cardShadow)">
    <rect x="585" y="80" width="230" height="280" rx="14" fill="var(--color-surface, #ffffff)" stroke="#E5A823" stroke-width="2"/>
    <!-- Number badge -->
    <circle cx="615" cy="110" r="18" fill="url(#step2Grad)"/>
    <text x="615" y="116" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#ffffff">2</text>
    <!-- Title -->
    <text x="700" y="116" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#E5A823">בחירת מודל ושיטה</text>
    <!-- Divider -->
    <line x1="605" y1="135" x2="795" y2="135" stroke="var(--color-border, #eee)" stroke-width="1"/>
    <!-- Items -->
    <text x="790" y="165" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text, #444)">• בחירת מודל בסיס</text>
    <text x="790" y="190" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text, #444)">• Full FT / LoRA?</text>
    <text x="790" y="215" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text, #444)">• Hyperparameters</text>
    <text x="790" y="240" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text, #444)">• GPU / תקציב</text>
    <!-- Platform examples -->
    <rect x="615" y="270" width="170" height="28" rx="14" fill="#FEF9E7"/>
    <text x="700" y="289" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#E5A823">OpenAI / HuggingFace</text>
  </g>

  <!-- Step 3: Training -->
  <g id="step3" filter="url(#cardShadow)">
    <rect x="335" y="80" width="230" height="280" rx="14" fill="var(--color-surface, #ffffff)" stroke="#27AE60" stroke-width="2"/>
    <!-- Number badge -->
    <circle cx="365" cy="110" r="18" fill="url(#step3Grad)"/>
    <text x="365" y="116" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#ffffff">3</text>
    <!-- Title -->
    <text x="450" y="116" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#27AE60">אימון</text>
    <!-- Divider -->
    <line x1="355" y1="135" x2="545" y2="135" stroke="var(--color-border, #eee)" stroke-width="1"/>
    <!-- Items -->
    <text x="540" y="165" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text, #444)">• העלאת הדאטה</text>
    <text x="540" y="190" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text, #444)">• הרצת האימון</text>
    <text x="540" y="215" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text, #444)">• מעקב אחרי loss</text>
    <text x="540" y="240" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text, #444)">• כמה דקות עד שעות</text>
    <!-- Cost -->
    <rect x="365" y="270" width="170" height="28" rx="14" fill="#D5F5E3"/>
    <text x="450" y="289" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#27AE60">💰 $5-$50 טיפוסי</text>
  </g>

  <!-- Step 4: Evaluation & Deploy -->
  <g id="step4" filter="url(#cardShadow)">
    <rect x="85" y="80" width="230" height="280" rx="14" fill="var(--color-surface, #ffffff)" stroke="#8E44AD" stroke-width="2"/>
    <!-- Number badge -->
    <circle cx="115" cy="110" r="18" fill="url(#step4Grad)"/>
    <text x="115" y="116" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#ffffff">4</text>
    <!-- Title -->
    <text x="200" y="116" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#8E44AD">הערכה ושימוש</text>
    <!-- Divider -->
    <line x1="105" y1="135" x2="295" y2="135" stroke="var(--color-border, #eee)" stroke-width="1"/>
    <!-- Items -->
    <text x="290" y="165" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text, #444)">• בדיקה על test set</text>
    <text x="290" y="190" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text, #444)">• השוואה למודל בסיס</text>
    <text x="290" y="215" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text, #444)">• שיפור איטרטיבי</text>
    <text x="290" y="240" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="13" fill="var(--color-text, #444)">• הטמעה בפרודקשן</text>
    <!-- Deploy -->
    <rect x="115" y="270" width="170" height="28" rx="14" fill="#F4ECF7"/>
    <text x="200" y="289" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#8E44AD">API / Self-hosted</text>
  </g>

  <!-- Bottom annotation -->
  <text x="550" y="420" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="14" fill="var(--color-text-muted, #888)">תהליך טיפוסי של Fine-Tuning — מהדאטה ועד לפרודקשן</text>

  <!-- Iteration feedback arrow -->
  <path d="M 200 385 C 200 420, 950 420, 950 385" stroke="var(--color-text-muted, #bbb)" stroke-width="1.5" stroke-dasharray="6,3" fill="none" marker-end="url(#arrowFlow)"/>
  <text x="550" y="460" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="12" fill="var(--color-text-muted, #aaa)">🔄 שיפור איטרטיבי — חוזרים לשלב 1 עם דאטה משופר</text>
</svg>
