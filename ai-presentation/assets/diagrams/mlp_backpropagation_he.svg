<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="1100" height="550" viewBox="0 0 1100 550" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" direction="rtl">
  <defs>
    <linearGradient id="inputG" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4A90D9"/>
      <stop offset="100%" style="stop-color:#2E6AB3"/>
    </linearGradient>
    <linearGradient id="hiddenG" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F7C948"/>
      <stop offset="100%" style="stop-color:#E5A823"/>
    </linearGradient>
    <linearGradient id="outputG" x1="646" y1="96" x2="704" y2="154" gradientUnits="userSpaceOnUse" gradientTransform="translate(0,190)">
      <stop offset="0%" style="stop-color:#2ECC71"/>
      <stop offset="100%" style="stop-color:#27AE60"/>
    </linearGradient>
    <marker id="arrowBack" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 3.5, 10 0, 10 7" fill="#C0392B"/>
    </marker>
    <linearGradient id="linearGradient45" xlink:href="#inputG" x1="149" y1="54" x2="201" y2="106" gradientUnits="userSpaceOnUse" gradientTransform="translate(0,190)"/>
    <linearGradient id="linearGradient46" xlink:href="#inputG" x1="149" y1="144" x2="201" y2="196" gradientUnits="userSpaceOnUse" gradientTransform="translate(0,190)"/>
    <linearGradient id="linearGradient47" xlink:href="#hiddenG" x1="399" y1="34" x2="451" y2="86" gradientUnits="userSpaceOnUse" gradientTransform="translate(0,190)"/>
    <linearGradient id="linearGradient48" xlink:href="#hiddenG" x1="399" y1="99" x2="451" y2="151" gradientUnits="userSpaceOnUse" gradientTransform="translate(0,190)"/>
    <linearGradient id="linearGradient49" xlink:href="#hiddenG" x1="399" y1="164" x2="451" y2="216" gradientUnits="userSpaceOnUse" gradientTransform="translate(0,190)"/>
  </defs>
  <!-- Title -->
  <text x="550" y="35" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="var(--color-text, #1a1a1a)">Backpropagation</text>

  <!-- Box 1: Forward Pass -->
  <rect x="50" y="60" width="240" height="100" fill="var(--color-surface, #ffffff)" stroke="#2e6ab3" stroke-width="2" rx="8"/>
  <text x="170" y="88" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="14px" font-weight="bold" fill="#2e6ab3">1. Forward Pass</text>
  <text x="270" y="115" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="12px" fill="var(--color-text, #333333)">הקלט זורם דרך הרשת</text>
  <text x="270" y="135" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="12px" fill="var(--color-text, #333333)">מייצר חיזוי ŷ</text>

  <!-- Box 2: Loss Computation -->
  <rect x="310" y="60" width="240" height="100" fill="var(--color-surface, #ffffff)" stroke="#c0392b" stroke-width="2" rx="8"/>
  <text x="430" y="88" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="14px" font-weight="bold" fill="#c0392b">2. חישוב Loss</text>
  <text x="530" y="115" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="12px" fill="var(--color-text, #333333)">משווים את ŷ ליעד y</text>
  <text x="530" y="135" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="12px" fill="var(--color-text, #333333)">כמה החיזוי שגוי?</text>

  <!-- Box 3: Backward Pass -->
  <rect x="570" y="60" width="240" height="100" fill="var(--color-surface, #ffffff)" stroke="#e5a823" stroke-width="2" rx="8"/>
  <text x="690" y="88" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="14px" font-weight="bold" fill="#b8860b">3. Backward Pass</text>
  <text x="790" y="115" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="12px" fill="var(--color-text, #333333)">שולחים את אות השגיאה אחורה</text>
  <text x="790" y="135" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="12px" fill="var(--color-text, #333333)">אילו משקלים גרמו לשגיאה?</text>

  <!-- Box 4: Weight Update -->
  <rect x="830" y="60" width="220" height="100" fill="var(--color-surface, #ffffff)" stroke="#27ae60" stroke-width="2" rx="8"/>
  <text x="940" y="88" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="14px" font-weight="bold" fill="#27ae60">4. עדכון משקלים</text>
  <text x="1030" y="115" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="12px" fill="var(--color-text, #333333)">מתאימים משקלים להפחתת שגיאה</text>
  <text x="1030" y="135" text-anchor="start" direction="rtl" font-family="Arial, sans-serif" font-size="12px" fill="var(--color-text, #333333)">הרשת לומדת!</text>

  <!-- Network diagram border -->
  <rect x="50" y="190" width="1000" height="250" fill="none" stroke="var(--color-border, #dddddd)" rx="10"/>

  <!-- Forward pass connections (faded) -->
  <g opacity="0.25" transform="translate(0,190)">
    <line x1="200" y1="80" x2="400" y2="60" stroke="#4a90d9" stroke-width="2"/>
    <line x1="200" y1="80" x2="400" y2="125" stroke="#4a90d9" stroke-width="2"/>
    <line x1="200" y1="80" x2="400" y2="190" stroke="#4a90d9" stroke-width="2"/>
    <line x1="200" y1="170" x2="400" y2="60" stroke="#4a90d9" stroke-width="2"/>
    <line x1="200" y1="170" x2="400" y2="125" stroke="#4a90d9" stroke-width="2"/>
    <line x1="200" y1="170" x2="400" y2="190" stroke="#4a90d9" stroke-width="2"/>
    <line x1="450" y1="60" x2="650" y2="125" stroke="#e5a823" stroke-width="2"/>
    <line x1="450" y1="125" x2="650" y2="125" stroke="#e5a823" stroke-width="2"/>
    <line x1="450" y1="190" x2="650" y2="125" stroke="#e5a823" stroke-width="2"/>
  </g>

  <!-- Backpropagation arrows (red dashed) -->
  <line x1="484" y1="262" x2="621" y2="305" stroke="#c0392b" stroke-width="1.6" stroke-dasharray="4.7,4.7" marker-start="url(#arrowBack)"/>
  <line x1="480" y1="315" x2="620" y2="315" stroke="#c0392b" stroke-width="1.9" stroke-dasharray="5.7,5.7" marker-start="url(#arrowBack)"/>
  <line x1="482" y1="370" x2="621" y2="325" stroke="#c0392b" stroke-width="1.6" stroke-dasharray="4.9,4.9" marker-start="url(#arrowBack)"/>
  <line x1="231" y1="266" x2="386" y2="251" stroke="#c0392b" stroke-width="1.7" stroke-dasharray="5.1,5.1" marker-start="url(#arrowBack)"/>
  <line x1="230" y1="275" x2="370" y2="310" stroke="#c0392b" stroke-width="1.9" stroke-dasharray="5.7,5.7" marker-start="url(#arrowBack)"/>
  <line x1="225" y1="347" x2="382" y2="259" stroke="#c0392b" stroke-width="1.9" stroke-dasharray="5.8,5.8" marker-start="url(#arrowBack)"/>
  <line x1="228" y1="354" x2="371" y2="321" stroke="#c0392b" stroke-width="1.6" stroke-dasharray="4.9,4.9" marker-start="url(#arrowBack)"/>
  <line x1="226" y1="284" x2="377" y2="367" stroke="#c0392b" stroke-width="1.8" stroke-dasharray="5.5,5.5" marker-start="url(#arrowBack)"/>
  <line x1="229" y1="363" x2="372" y2="378" stroke="#c0392b" stroke-width="1.9" stroke-dasharray="5.6,5.6" marker-start="url(#arrowBack)"/>

  <!-- Input nodes -->
  <circle cx="175" cy="270" r="25" fill="url(#linearGradient45)" stroke="#2e6ab3" stroke-width="2"/>
  <text x="175" y="275" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="12px" font-weight="bold" fill="#ffffff">x₁</text>
  <circle cx="175" cy="360" r="25" fill="url(#linearGradient46)" stroke="#2e6ab3" stroke-width="2"/>
  <text x="175" y="365" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="12px" font-weight="bold" fill="#ffffff">x₂</text>
  <text x="175" y="410" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="11px" fill="var(--color-text, #1a1a1a)">קלט</text>

  <!-- Hidden layer nodes -->
  <circle cx="425" cy="250" r="25" fill="url(#linearGradient47)" stroke="#e5a823" stroke-width="2"/>
  <circle cx="425" cy="315" r="25" fill="url(#linearGradient48)" stroke="#e5a823" stroke-width="2"/>
  <circle cx="425" cy="380" r="25" fill="url(#linearGradient49)" stroke="#e5a823" stroke-width="2"/>
  <text x="425" y="425" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="11px" fill="var(--color-text, #1a1a1a)">שכבה נסתרת</text>

  <!-- Output node -->
  <circle cx="675" cy="315" r="28" fill="url(#outputG)" stroke="#27ae60" stroke-width="2"/>
  <text x="675" y="320" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="14px" font-weight="bold" fill="#ffffff">ŷ</text>
  <text x="675" y="365" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="11px" fill="var(--color-text, #1a1a1a)">פלט</text>

  <!-- Loss box -->
  <line x1="703" y1="315" x2="770" y2="315" stroke="#27ae60" stroke-width="2"/>
  <rect x="780" y="290" width="80" height="50" fill="var(--color-surface, #ffffff)" stroke="#c0392b" stroke-width="2" rx="5"/>
  <text x="820" y="320" text-anchor="middle" direction="ltr" font-family="Arial, sans-serif" font-size="13px" font-weight="bold" fill="#c0392b">Loss</text>

  <!-- Error annotation box -->
  <g transform="translate(-50,-5)">
    <rect x="784" y="214" width="170" height="55" fill="var(--color-surface, #ffffff)" stroke="#c0392b" stroke-width="1.5" rx="5"/>
    <text x="869" y="239" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="12px" font-weight="bold" fill="#c0392b">השגיאה זורמת אחורה</text>
    <text x="869" y="259" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="11px" fill="var(--color-text, #333333)">לעדכון המשקלים</text>
  </g>

  <!-- Bottom cycle bar -->
  <rect x="300" y="460" width="500" height="40" fill="var(--color-surface, #f8f8f8)" stroke="var(--color-border, #666)" stroke-width="1.5" rx="8"/>
  <text x="550" y="485" text-anchor="middle" direction="rtl" font-family="Arial, sans-serif" font-size="14" fill="var(--color-text, #333333)">חוזר: forward → loss → backward → עדכון → forward → ...</text>
</svg>
