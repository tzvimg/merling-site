import{aK as M,aL as y,aM as A,aN as b,aO as R,aP as q}from"./index-IjspgCe4.js";import{i as F}from"./init-Gi6I4Gst.js";function g(n,r){return n==null||r==null?NaN:n<r?-1:n>r?1:n>=r?0:NaN}function P(n,r){return n==null||r==null?NaN:r<n?-1:r>n?1:r>=n?0:NaN}function w(n){let r,i,t;n.length!==2?(r=g,i=(u,o)=>g(n(u),o),t=(u,o)=>n(u)-o):(r=n===g||n===P?n:S,i=n,t=n);function c(u,o,e=0,m=u.length){if(e<m){if(r(o,o)!==0)return m;do{const l=e+m>>>1;i(u[l],o)<0?e=l+1:m=l}while(e<m)}return e}function f(u,o,e=0,m=u.length){if(e<m){if(r(o,o)!==0)return m;do{const l=e+m>>>1;i(u[l],o)<=0?e=l+1:m=l}while(e<m)}return e}function a(u,o,e=0,m=u.length){const l=c(u,o,e,m-1);return l>e&&t(u[l-1],o)>-t(u[l],o)?l-1:l}return{left:c,center:a,right:f}}function S(){return 0}function z(n){return n===null?NaN:+n}const I=w(g),$=I.right;w(z).center;const j=Math.sqrt(50),x=Math.sqrt(10),B=Math.sqrt(2);function v(n,r,i){const t=(r-n)/Math.max(0,i),c=Math.floor(Math.log10(t)),f=t/Math.pow(10,c),a=f>=j?10:f>=x?5:f>=B?2:1;let u,o,e;return c<0?(e=Math.pow(10,-c)/a,u=Math.round(n*e),o=Math.round(r*e),u/e<n&&++u,o/e>r&&--o,e=-e):(e=Math.pow(10,c)*a,u=Math.round(n/e),o=Math.round(r/e),u*e<n&&++u,o*e>r&&--o),o<u&&.5<=i&&i<2?v(n,r,i*2):[u,o,e]}function K(n,r,i){if(r=+r,n=+n,i=+i,!(i>0))return[];if(n===r)return[n];const t=r<n,[c,f,a]=t?v(r,n,i):v(n,r,i);if(!(f>=c))return[];const u=f-c+1,o=new Array(u);if(t)if(a<0)for(let e=0;e<u;++e)o[e]=(f-e)/-a;else for(let e=0;e<u;++e)o[e]=(f-e)*a;else if(a<0)for(let e=0;e<u;++e)o[e]=(c+e)/-a;else for(let e=0;e<u;++e)o[e]=(c+e)*a;return o}function N(n,r,i){return r=+r,n=+n,i=+i,v(n,r,i)[2]}function L(n,r,i){r=+r,n=+n,i=+i;const t=r<n,c=t?N(r,n,i):N(n,r,i);return(t?-1:1)*(c<0?1/-c:c)}function O(n,r){return n=+n,r=+r,function(i){return Math.round(n*(1-i)+r*i)}}function C(n){return Math.max(0,-M(Math.abs(n)))}function D(n,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(M(r)/3)))*3-M(Math.abs(n)))}function E(n,r){return n=Math.abs(n),r=Math.abs(r)-n,Math.max(0,M(r)-M(n))+1}function G(n){return function(){return n}}function H(n){return+n}var p=[0,1];function s(n){return n}function d(n,r){return(r-=n=+n)?function(i){return(i-n)/r}:G(isNaN(r)?NaN:.5)}function J(n,r){var i;return n>r&&(i=n,n=r,r=i),function(t){return Math.max(n,Math.min(r,t))}}function Q(n,r,i){var t=n[0],c=n[1],f=r[0],a=r[1];return c<t?(t=d(c,t),f=i(a,f)):(t=d(t,c),f=i(f,a)),function(u){return f(t(u))}}function T(n,r,i){var t=Math.min(n.length,r.length)-1,c=new Array(t),f=new Array(t),a=-1;for(n[t]<n[0]&&(n=n.slice().reverse(),r=r.slice().reverse());++a<t;)c[a]=d(n[a],n[a+1]),f[a]=i(r[a],r[a+1]);return function(u){var o=$(n,u,1,t)-1;return f[o](c[o](u))}}function U(n,r){return r.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function V(){var n=p,r=p,i=A,t,c,f,a=s,u,o,e;function m(){var h=Math.min(n.length,r.length);return a!==s&&(a=J(n[0],n[h-1])),u=h>2?T:Q,o=e=null,l}function l(h){return h==null||isNaN(h=+h)?f:(o||(o=u(n.map(t),r,i)))(t(a(h)))}return l.invert=function(h){return a(c((e||(e=u(r,n.map(t),y)))(h)))},l.domain=function(h){return arguments.length?(n=Array.from(h,H),m()):n.slice()},l.range=function(h){return arguments.length?(r=Array.from(h),m()):r.slice()},l.rangeRound=function(h){return r=Array.from(h),i=O,m()},l.clamp=function(h){return arguments.length?(a=h?!0:s,m()):a!==s},l.interpolate=function(h){return arguments.length?(i=h,m()):i},l.unknown=function(h){return arguments.length?(f=h,l):f},function(h,k){return t=h,c=k,m()}}function W(){return V()(s,s)}function X(n,r,i,t){var c=L(n,r,i),f;switch(t=b(t??",f"),t.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(r));return t.precision==null&&!isNaN(f=D(c,a))&&(t.precision=f),R(t,a)}case"":case"e":case"g":case"p":case"r":{t.precision==null&&!isNaN(f=E(c,Math.max(Math.abs(n),Math.abs(r))))&&(t.precision=f-(t.type==="e"));break}case"f":case"%":{t.precision==null&&!isNaN(f=C(c))&&(t.precision=f-(t.type==="%")*2);break}}return q(t)}function Y(n){var r=n.domain;return n.ticks=function(i){var t=r();return K(t[0],t[t.length-1],i??10)},n.tickFormat=function(i,t){var c=r();return X(c[0],c[c.length-1],i??10,t)},n.nice=function(i){i==null&&(i=10);var t=r(),c=0,f=t.length-1,a=t[c],u=t[f],o,e,m=10;for(u<a&&(e=a,a=u,u=e,e=c,c=f,f=e);m-- >0;){if(e=N(a,u,i),e===o)return t[c]=a,t[f]=u,r(t);if(e>0)a=Math.floor(a/e)*e,u=Math.ceil(u/e)*e;else if(e<0)a=Math.ceil(a*e)/e,u=Math.floor(u*e)/e;else break;o=e}return n},n}function Z(){var n=W();return n.copy=function(){return U(n,Z())},F.apply(n,arguments),Y(n)}export{U as a,w as b,W as c,Z as l,L as t};
